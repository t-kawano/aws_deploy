version: 2

jobs:
  deploy_serverless:
    docker:
      - image: node:6.7.0
    working_directory: ~/circleci-demo-workflows
    steps:
      - checkout
      - run:
          name: install serverless framework
          command: npm install -g serverless
      - run:
          name: pwd
          command: pwd
      - run:
          name: cd
          command: cd ./src
      - run:
          name: delete unused packages
          command: npm prune --production
      - run:
          name: serverless deploy
          command: serverless deploy --region us-east-2

workflows:
  version: 2
  deploy_flow:
    jobs:
      - deploy_serverless
